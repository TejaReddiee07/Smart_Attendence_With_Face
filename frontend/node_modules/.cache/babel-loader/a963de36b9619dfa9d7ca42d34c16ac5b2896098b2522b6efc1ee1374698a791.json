{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nagat\\\\OneDrive\\\\Desktop\\\\sample project\\\\frontend\\\\src\\\\components\\\\MarkAttendance.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MarkAttendance = ({\n  onStatsUpdate\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const [results, setResults] = useState([]);\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        await videoRef.current.play();\n      }\n    } catch (err) {\n      console.error(err);\n      window.alert('Cannot access camera');\n    }\n  };\n  const stopCamera = () => {\n    if (videoRef.current && videoRef.current.srcObject) {\n      videoRef.current.srcObject.getTracks().forEach(t => t.stop());\n      videoRef.current.srcObject = null;\n    }\n  };\n  useEffect(() => {\n    startCamera();\n    return () => stopCamera();\n  }, []);\n  const captureAndMark = async () => {\n    if (!videoRef.current) return;\n    const canvas = document.createElement('canvas');\n    canvas.width = videoRef.current.videoWidth;\n    canvas.height = videoRef.current.videoHeight;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n    const dataUrl = canvas.toDataURL('image/jpeg');\n    try {\n      const res = await fetch('http://localhost:5000/api/mark_attendance', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          frame: dataUrl\n        })\n      });\n      const data = await res.json();\n      setResults(data.students || []);\n      if (onStatsUpdate) onStatsUpdate();\n    } catch (err) {\n      console.error(err);\n      window.alert('Error marking attendance');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"camera-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      id: \"video-attendance\",\n      ref: videoRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"capture-btn\",\n      onClick: captureAndMark,\n      children: \"Mark Attendance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"attendanceResult\",\n      children: [results.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No faces recognized yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 34\n      }, this), results.map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"attendance-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"record-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"record-avatar\",\n            children: s.name ? s.name.charAt(0) : '?'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: s.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [s.admission_no, \" \\xB7 \", s.branch]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"record-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-badge status-present\",\n            children: \"Present\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Confidence: \", (s.confidence * 100).toFixed(1), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)]\n      }, s.admission_no, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(MarkAttendance, \"+a2H6rFDPhOObU9ir69t0nD2VME=\");\n_c = MarkAttendance;\nexport default MarkAttendance;\nvar _c;\n$RefreshReg$(_c, \"MarkAttendance\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","MarkAttendance","onStatsUpdate","_s","videoRef","results","setResults","startCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","play","err","console","error","window","alert","stopCamera","getTracks","forEach","t","stop","captureAndMark","canvas","document","createElement","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","dataUrl","toDataURL","res","fetch","method","headers","body","JSON","stringify","frame","data","json","students","className","children","id","ref","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","map","s","name","charAt","admission_no","branch","confidence","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/nagat/OneDrive/Desktop/sample project/frontend/src/components/MarkAttendance.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\nconst MarkAttendance = ({ onStatsUpdate }) => {\r\n  const videoRef = useRef(null);\r\n  const [results, setResults] = useState([]);\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        await videoRef.current.play();\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      window.alert('Cannot access camera');\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (videoRef.current && videoRef.current.srcObject) {\r\n      videoRef.current.srcObject.getTracks().forEach((t) => t.stop());\r\n      videoRef.current.srcObject = null;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    startCamera();\r\n    return () => stopCamera();\r\n  }, []);\r\n\r\n  const captureAndMark = async () => {\r\n    if (!videoRef.current) return;\r\n\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = videoRef.current.videoWidth;\r\n    canvas.height = videoRef.current.videoHeight;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\r\n\r\n    const dataUrl = canvas.toDataURL('image/jpeg');\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/mark_attendance', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ frame: dataUrl })\r\n      });\r\n      const data = await res.json();\r\n      setResults(data.students || []);\r\n      if (onStatsUpdate) onStatsUpdate();\r\n    } catch (err) {\r\n      console.error(err);\r\n      window.alert('Error marking attendance');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"camera-container\">\r\n      <video id=\"video-attendance\" ref={videoRef}></video>\r\n      <button className=\"capture-btn\" onClick={captureAndMark}>\r\n        Mark Attendance\r\n      </button>\r\n\r\n      <div id=\"attendanceResult\">\r\n        {results.length === 0 && <p>No faces recognized yet.</p>}\r\n        {results.map((s) => (\r\n          <div key={s.admission_no} className=\"attendance-item\">\r\n            <div className=\"record-left\">\r\n              <div className=\"record-avatar\">\r\n                {s.name ? s.name.charAt(0) : '?'}\r\n              </div>\r\n              <div>\r\n                <h4>{s.name}</h4>\r\n                <p>\r\n                  {s.admission_no} Â· {s.branch}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"record-right\">\r\n              <span className=\"status-badge status-present\">Present</span>\r\n              <p>Confidence: {(s.confidence * 100).toFixed(1)}%</p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MarkAttendance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}