{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nagat\\\\OneDrive\\\\Desktop\\\\sample project\\\\frontend\\\\src\\\\components\\\\MarkAttendance.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MarkAttendance = ({\n  onStatsUpdate\n}) => {\n  _s();\n  const [isDetecting, setIsDetecting] = useState(false);\n  const [result, setResult] = useState(null);\n  const [isCameraActive, setIsCameraActive] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const startAttendance = async () => {\n    setIsDetecting(true);\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: 640,\n          height: 480\n        }\n      });\n      const video = videoRef.current;\n      video.srcObject = stream;\n      setIsCameraActive(true);\n\n      // Capture after 2 seconds\n      setTimeout(async () => {\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        ctx.drawImage(video, 0, 0);\n        const frameData = canvas.toDataURL('image/jpeg', 0.8);\n        const response = await fetch('http://localhost:5000/api/mark_attendance', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            frame: frameData\n          })\n        });\n        const data = await response.json();\n        setResult(data.students);\n        onStatsUpdate();\n\n        // Stop camera\n        stream.getTracks().forEach(track => track.stop());\n        setIsCameraActive(false);\n        setIsDetecting(false);\n      }, 2000);\n    } catch (error) {\n      alert('Camera access denied! Please allow camera permission.');\n      setIsDetecting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mark-attendance-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"camera-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        id: \"video\",\n        autoPlay: true,\n        muted: true,\n        playsInline: true,\n        className: isCameraActive ? 'active' : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detection-overlay\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: `fas fa-circle ${isDetecting ? 'detecting' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: isDetecting ? 'üîç Detecting faces...' : 'Click to start detection'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `capture-btn ${isDetecting ? 'detecting' : ''}`,\n      onClick: startAttendance,\n      disabled: isDetecting,\n      children: isDetecting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-spinner fa-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), \"Detecting...\"]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), \"Mark Attendance\"]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), result && /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"attendanceResult\",\n      className: result.length > 0 ? 'success' : 'error',\n      children: result.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u2705 Attendance Marked Successfully!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success-students\",\n          children: result.map((student, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"success-student\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"student-avatar\",\n              children: student.name.charAt(0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: student.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"ID: \", student.admission_no]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDE14 No Students Detected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Ensure student faces camera clearly and try again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(MarkAttendance, \"03yseWHrWj6mGwl8MRriVY37An4=\");\n_c = MarkAttendance;\nexport default MarkAttendance;\nvar _c;\n$RefreshReg$(_c, \"MarkAttendance\");","map":{"version":3,"names":["React","useState","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","MarkAttendance","onStatsUpdate","_s","isDetecting","setIsDetecting","result","setResult","isCameraActive","setIsCameraActive","videoRef","canvasRef","startAttendance","stream","navigator","mediaDevices","getUserMedia","video","width","height","current","srcObject","setTimeout","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","frameData","toDataURL","response","fetch","method","headers","body","JSON","stringify","frame","data","json","students","getTracks","forEach","track","stop","error","alert","className","children","ref","id","autoPlay","muted","playsInline","fileName","_jsxFileName","lineNumber","columnNumber","style","display","onClick","disabled","length","map","student","index","name","charAt","admission_no","_c","$RefreshReg$"],"sources":["C:/Users/nagat/OneDrive/Desktop/sample project/frontend/src/components/MarkAttendance.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\n\r\nconst MarkAttendance = ({ onStatsUpdate }) => {\r\n  const [isDetecting, setIsDetecting] = useState(false);\r\n  const [result, setResult] = useState(null);\r\n  const [isCameraActive, setIsCameraActive] = useState(false);\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  const startAttendance = async () => {\r\n    setIsDetecting(true);\r\n    \r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { width: 640, height: 480 } \r\n      });\r\n      const video = videoRef.current;\r\n      video.srcObject = stream;\r\n      \r\n      setIsCameraActive(true);\r\n      \r\n      // Capture after 2 seconds\r\n      setTimeout(async () => {\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n        ctx.drawImage(video, 0, 0);\r\n        \r\n        const frameData = canvas.toDataURL('image/jpeg', 0.8);\r\n        \r\n        const response = await fetch('http://localhost:5000/api/mark_attendance', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ frame: frameData })\r\n        });\r\n        \r\n        const data = await response.json();\r\n        setResult(data.students);\r\n        onStatsUpdate();\r\n        \r\n        // Stop camera\r\n        stream.getTracks().forEach(track => track.stop());\r\n        setIsCameraActive(false);\r\n        setIsDetecting(false);\r\n      }, 2000);\r\n      \r\n    } catch (error) {\r\n      alert('Camera access denied! Please allow camera permission.');\r\n      setIsDetecting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mark-attendance-container\">\r\n      <div className=\"camera-section\">\r\n        <video \r\n          ref={videoRef} \r\n          id=\"video\" \r\n          autoPlay \r\n          muted \r\n          playsInline \r\n          className={isCameraActive ? 'active' : ''}\r\n        />\r\n        <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n        \r\n        <div className=\"detection-overlay\">\r\n          <i className={`fas fa-circle ${isDetecting ? 'detecting' : ''}`}></i>\r\n          <p>{isDetecting ? 'üîç Detecting faces...' : 'Click to start detection'}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <button \r\n        className={`capture-btn ${isDetecting ? 'detecting' : ''}`}\r\n        onClick={startAttendance}\r\n        disabled={isDetecting}\r\n      >\r\n        {isDetecting ? (\r\n          <>\r\n            <i className=\"fas fa-spinner fa-spin\"></i>\r\n            Detecting...\r\n          </>\r\n        ) : (\r\n          <>\r\n            <i className=\"fas fa-camera\"></i>\r\n            Mark Attendance\r\n          </>\r\n        )}\r\n      </button>\r\n\r\n      {/* Results */}\r\n      {result && (\r\n        <div id=\"attendanceResult\" className={result.length > 0 ? 'success' : 'error'}>\r\n          {result.length > 0 ? (\r\n            <>\r\n              <h3>‚úÖ Attendance Marked Successfully!</h3>\r\n              <div className=\"success-students\">\r\n                {result.map((student, index) => (\r\n                  <div key={index} className=\"success-student\">\r\n                    <div className=\"student-avatar\">{student.name.charAt(0)}</div>\r\n                    <div>\r\n                      <h4>{student.name}</h4>\r\n                      <p>ID: {student.admission_no}</p>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <h3>üòî No Students Detected</h3>\r\n              <p>Ensure student faces camera clearly and try again</p>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MarkAttendance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}