{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nagat\\\\OneDrive\\\\Desktop\\\\sample project\\\\frontend\\\\src\\\\components\\\\MarkAttendance.js\",\n  _s = $RefreshSig$();\n// src/components/MarkAttendance.js\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = 'http://localhost:5000';\nconst MarkAttendance = ({\n  onStatsUpdate\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const [results, setResults] = useState([]);\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        await videoRef.current.play();\n      }\n    } catch (err) {\n      console.error(err);\n      window.alert('Cannot access camera');\n    }\n  };\n  const stopCamera = () => {\n    if (videoRef.current && videoRef.current.srcObject) {\n      videoRef.current.srcObject.getTracks().forEach(t => t.stop());\n      videoRef.current.srcObject = null;\n    }\n  };\n  useEffect(() => {\n    startCamera();\n    return () => stopCamera();\n  }, []);\n  const captureAndMark = async () => {\n    if (!videoRef.current) return;\n    const canvas = document.createElement('canvas');\n    canvas.width = videoRef.current.videoWidth;\n    canvas.height = videoRef.current.videoHeight;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n    const dataUrl = canvas.toDataURL('image/jpeg');\n    try {\n      const res = await fetch(`${API_BASE}/api/mark_attendance`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          frame: dataUrl\n        })\n      });\n      const data = await res.json();\n      console.log('Mark attendance result:', data);\n      setResults(data.students || []);\n      if (onStatsUpdate) onStatsUpdate();\n    } catch (err) {\n      console.error(err);\n      window.alert('Error marking attendance');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"camera-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"capture-btn\",\n      onClick: captureAndMark,\n      children: \"Mark Attendance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '1rem'\n      },\n      children: [results.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#6b7280'\n        },\n        children: \"No faces recognized yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), results.map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"attendance-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"record-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"record-avatar\",\n            children: s.name ? s.name.charAt(0) : '?'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                margin: 0\n              },\n              children: s.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: 0,\n                fontSize: '0.85rem',\n                color: '#6b7280'\n              },\n              children: [s.admission_no, \" \\xB7 \", s.branch]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"record-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-badge status-present\",\n            children: \"Present\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0,\n              fontSize: '0.8rem',\n              color: '#6b7280'\n            },\n            children: [\"Confidence: \", (s.confidence * 100).toFixed(1), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, s.admission_no, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(MarkAttendance, \"+a2H6rFDPhOObU9ir69t0nD2VME=\");\n_c = MarkAttendance;\nexport default MarkAttendance;\nvar _c;\n$RefreshReg$(_c, \"MarkAttendance\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","API_BASE","MarkAttendance","onStatsUpdate","_s","videoRef","results","setResults","startCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","play","err","console","error","window","alert","stopCamera","getTracks","forEach","t","stop","captureAndMark","canvas","document","createElement","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","dataUrl","toDataURL","res","fetch","method","headers","body","JSON","stringify","frame","data","json","log","students","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","marginTop","length","color","map","s","name","charAt","margin","fontSize","admission_no","branch","confidence","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/nagat/OneDrive/Desktop/sample project/frontend/src/components/MarkAttendance.js"],"sourcesContent":["// src/components/MarkAttendance.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\n\r\nconst API_BASE = 'http://localhost:5000';\r\n\r\nconst MarkAttendance = ({ onStatsUpdate }) => {\r\n  const videoRef = useRef(null);\r\n  const [results, setResults] = useState([]);\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        await videoRef.current.play();\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      window.alert('Cannot access camera');\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (videoRef.current && videoRef.current.srcObject) {\r\n      videoRef.current.srcObject.getTracks().forEach((t) => t.stop());\r\n      videoRef.current.srcObject = null;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    startCamera();\r\n    return () => stopCamera();\r\n  }, []);\r\n\r\n  const captureAndMark = async () => {\r\n    if (!videoRef.current) return;\r\n\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = videoRef.current.videoWidth;\r\n    canvas.height = videoRef.current.videoHeight;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\r\n\r\n    const dataUrl = canvas.toDataURL('image/jpeg');\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/mark_attendance`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ frame: dataUrl })\r\n      });\r\n      const data = await res.json();\r\n      console.log('Mark attendance result:', data);\r\n      setResults(data.students || []);\r\n      if (onStatsUpdate) onStatsUpdate();\r\n    } catch (err) {\r\n      console.error(err);\r\n      window.alert('Error marking attendance');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"camera-container\">\r\n      <video ref={videoRef} />\r\n      <button className=\"capture-btn\" onClick={captureAndMark}>\r\n        Mark Attendance\r\n      </button>\r\n\r\n      <div style={{ marginTop: '1rem' }}>\r\n        {results.length === 0 && (\r\n          <p style={{ color: '#6b7280' }}>No faces recognized yet.</p>\r\n        )}\r\n        {results.map((s) => (\r\n          <div key={s.admission_no} className=\"attendance-item\">\r\n            <div className=\"record-left\">\r\n              <div className=\"record-avatar\">\r\n                {s.name ? s.name.charAt(0) : '?'}\r\n              </div>\r\n              <div>\r\n                <h4 style={{ margin: 0 }}>{s.name}</h4>\r\n                <p style={{ margin: 0, fontSize: '0.85rem', color: '#6b7280' }}>\r\n                  {s.admission_no} Â· {s.branch}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"record-right\">\r\n              <span className=\"status-badge status-present\">Present</span>\r\n              <p style={{ margin: 0, fontSize: '0.8rem', color: '#6b7280' }}>\r\n                Confidence: {(s.confidence * 100).toFixed(1)}%\r\n              </p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MarkAttendance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}